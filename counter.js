// ----------------------------------------------------------------------------------
stories = [
  // {
  //   title: "meee",
  //   para: "i can sing"
  // },
  {
    title: "The Forgotten Toy",
    para: "In the attic, shrouded in dust and cobwebs, lay a forgotten teddy bear. Its once bright fur had faded to a dull grey, and its eyes, once filled with childlike wonder, now held a melancholy gaze. The bear had been a cherished companion, a source of comfort and security for a little girl who had long since grown up. Years had passed since the girl had last played with the bear. It had been tucked away in a forgotten corner of the attic, a silent witness to the passage of time. The bear had missed the laughter, the hugs, the adventures they had shared. It yearned for the warmth of a child's embrace, the soft touch of a little hand. One day, a new family moved into the house. A young girl, much like the one who had once loved the bear, discovered the forgotten toy. She was immediately drawn to the bear's gentle expression and worn fur. She carefully dusted it off and hugged it close. The bear felt a surge of warmth and happiness as it was finally loved again."
  },
  {
    title: "The Lonely Lighthouse",
    para: "On a desolate island, battered by the relentless waves of the sea, stood a towering lighthouse. Its beacon, a steady beam of light, pierced the darkness of the night, guiding ships safely through treacherous waters. But the lighthouse was more than just a navigational aid; it was also home to a solitary keeper. The keeper, an old man with a weathered face and piercing blue eyes, had lived on the island for as long as he could remember. He had watched countless storms rage and seen the sea in all its fury. Yet, he had never felt lonely. The lighthouse was his world, and he loved it dearly. Each night, the keeper would climb to the top of the lighthouse and watch the stars. He would imagine far-off lands and dream of adventures he would never have. Sometimes, he would even think he could hear the distant voices of sailors, singing sea shanties as they sailed past. One evening, a young woman washed ashore on the island. She was lost and frightened, and the keeper welcomed her into his home. Together, they repaired the lighthouse and kept the beacon shining. The keeper found a new purpose in his life, and the young woman found a home. And so, the lonely lighthouse became a place of hope and companionship."
  },
  {
    title: " The Whispering Wind",
    para: "A gentle breeze whispered through the ancient oak trees, carrying with it the scent of pine needles and damp earth. The wind seemed to have a voice, a soft, ethereal whisper that spoke of secrets and mysteries. It told tales of forgotten kingdoms, of hidden treasures buried deep beneath the forest floor. The wind whispered of a time when the forest was filled with laughter and joy. It spoke of children who played among the trees, of lovers who strolled hand-in-hand under the moonlight. But the wind also whispered of sorrow and loss, of the passing of time and the inevitability of change. As the wind continued to whisper, a young woman sat beneath the oak tree, listening intently. She felt a sense of peace and tranquility, as if the wind were speaking directly to her soul. She closed her eyes and let the whispers wash over her, carrying her away to a world of magic and wonder."
  },
  {
    title: "The Time Capsule",
    para: "Buried deep in the backyard, beneath a sprawling willow tree, lay a small, rusted tin box. It had been buried there years ago by a young boy named Thomas, who had filled it with his most precious possessions. Inside the box were a collection of marbles, a broken toy car, and a faded photograph of his family. Thomas had buried the box with the hope that one day, someone would find it and learn about his childhood. He had imagined that the future would be a place of wonder and excitement, filled with flying cars and talking robots. He had dreamed of growing up to be a famous explorer, traveling to distant lands and discovering new worlds. Years later, a group of children playing in the backyard stumbled upon the time capsule. They carefully dug it up and opened it, revealing the treasures inside. As they examined the contents of the box, they couldn't help but feel a connection to the boy who had buried it. They imagined his hopes and dreams, his excitement and his fear. The children decided to write a letter to Thomas, telling him about their discovery and sharing their own dreams for the future. They buried the letter in the same spot where Thomas had buried his time capsule, hoping that one day, someone else would find it and continue the tradition."
  },
  {
    title: "The Dancing Shadows",
    para: "As moonlight filtered through the window, strange shadows danced across the wall, taking on the forms of creatures from a forgotten realm. There was a towering dragon with fiery breath, a mischievous imp with glowing eyes, and a wise old owl with feathered wings. A young boy named Ethan watched the shadows with wide-eyed wonder. He had never seen anything like it before. He imagined the creatures coming to life, leaping from the wall and into his room. He could almost hear their voices, their laughter, their secrets. Ethan reached out and touched one of the shadows, but it simply dissipated into nothingness. Disappointed, he turned to leave the room. But as he did, he noticed a faint glow coming from beneath his bed. He crawled under the bed and found a small, leather-bound book. The book was filled with stories of the creatures he had seen in the shadows. It told of their adventures, their battles, and their friendships. As Ethan read the stories, he felt a sense of connection to the creatures, as if they were old friends. He knew that he would never forget the night the shadows had danced in his room."
  },
  {
    title: " The Last Bookstore",
    para: "In a world dominated by screens and digital downloads, a quaint bookstore stood as a refuge for book lovers. Its shelves were lined with thousands of volumes, each one a treasure trove of knowledge and imagination. The bookstore was a place where people could escape the hustle and bustle of modern life and lose themselves in the pages of a good book. The owner of the bookstore, an elderly woman named Mrs. Willow, had been running the shop for as long as anyone could remember. She had a passion for books that was infectious, and she loved sharing her love of reading with her customers. She knew every book in the store by heart, and she could always recommend the perfect book for any reader. One day, a young boy named Oliver wandered into the bookstore. He was shy and introverted, and he had trouble making friends at school. Mrs. Willow took him under her wing and introduced him to the world of books. She helped him discover authors he had never heard of and genres he didn't know existed. Oliver soon became a regular visitor to the bookstore. He spent hours browsing the shelves, lost in the pages of his favorite books. He made friends with Mrs. Willow and the other customers, and he began to feel more confident and outgoing."
  },
  {
    title: "The Forgotten Garden",
    para: "Overgrown with weeds and vines, a once vibrant garden lay forgotten. The flowers had withered and died, and the trees were bare and skeletal. It was a sad and desolate place, a stark contrast to the beauty it had once held. A young girl named Lily stumbled upon the forgotten garden one day. She was drawn to its mysterious and haunting beauty. She began to clear away the weeds and debris, revealing the hidden treasures beneath. She planted new flowers, pruned the trees, and tended to the garden with care. As the garden slowly came back to life, Lily felt a sense of peace and fulfillment. She loved watching the flowers bloom and the birds sing. She found solace in the quiet solitude of the garden, and she often spent hours there, lost in thought."
  },
  {
    title: "The Lost Puppy",
    para: "A tiny puppy wandered away from home, lost in a vast city. Its tail wagged hopefully as it searched for its family, but it was scared and confused. The puppy didn't know where it was or how to get home. A kindhearted woman named Sarah found the puppy wandering the streets. She took it home and gave it food and water. The puppy was grateful for her kindness, and it quickly warmed up to her. Sarah named the puppy Max and decided to keep him. Max became a beloved member of Sarah's family. He was always happy and playful, and he brought joy to everyone around him. Sarah was so grateful for Max, and she knew that he had saved her life."
  },
  {
    title: "The Stargazer",
    para: "A young girl named Anya lay on her back, gazing at the starry sky. She imagined far-off worlds and dreamed of adventures beyond her wildest imagination. She was fascinated by the stars and the mysteries of the universe. Anya's parents encouraged her curiosity and helped her learn about astronomy. They bought her a telescope and took her to stargazing parties. Anya loved learning about the planets, galaxies, and constellations. She felt a deep connection to the universe and a sense of wonder that filled her heart. Anya grew up to become a renowned astronomer. She made groundbreaking discoveries and inspired countless people with her passion for science. She never forgot the night she lay on her back, gazing at the stars, and dreamed of reaching for the sky."
  },
  {
    title: "The Old Clock",
    para: "An antique clock ticked away, its pendulum swinging rhythmically. It had witnessed countless moments, both joyous and sorrowful. The clock had been in the family for generations, and it was a cherished heirloom. The clock had a special meaning for the family. It had been a gift to the grandfather from his beloved wife, and it had been passed down through the generations as a symbol of love and family. The clock had been present at births, weddings, and funerals. It had seen children grow up, love blossom, and lives change. One day, the clock stopped working. The family was heartbroken, and they felt as if a piece of their history had been lost. They took the clock to a watchmaker, who was able to repair it. When the clock started ticking again, the family was overjoyed. They knew that the clock would continue to be a cherished part of their lives for generations to come."
  },
  {
    title: "The Haunted House",
    para: "Rumors of a ghostly presence lingered around the old Victorian house. Some said they had heard eerie whispers and seen shadows moving in the night. Others claimed to have felt a cold draft, even on the hottest days. A young couple, curious and intrigued, decided to move into the haunted house. They were convinced that the rumors were exaggerated and that there was nothing to fear. But as they settled into their new home, they began to experience strange and unsettling things. One night, they heard a faint scratching noise coming from the attic. They investigated, but found nothing. The next night, they felt a cold draft blow through the house, even though all the windows were closed. And then, they started to hear whispers, as if someone were speaking to them from the shadows. The couple was terrified, but they were determined to confront the ghost. They gathered their courage and called out to the spirit. To their surprise, the whispers stopped, and the house fell silent. From that day forward, they never experienced anything supernatural again."
  },
  {
    title: "The Secret Garden",
    para: "Behind a high wall, a hidden garden bloomed. It was a place of tranquility, where nature's beauty thrived undisturbed. The garden was a secret oasis, known only to a few select people. A young girl named Anya discovered the secret garden one day while exploring the neighborhood. She was enchanted by its beauty and the peaceful atmosphere. She began to visit the garden regularly, and she found solace in its quiet solitude. Anya learned that the garden had been created by an elderly woman named Mrs. Willow. She had tended to the garden for many years, and it had become her sanctuary. Mrs. Willow was delighted to share her secret garden with Anya, and she taught her all she knew about gardening. Anya and Mrs. Willow became close friends. They spent countless hours in the garden, tending to the flowers, pruning the trees, and simply enjoying the beauty of nature. The secret garden became a special place for both of them, a place where they could escape the stresses of everyday life and find peace."
  },
  {
    title: "The Lighthouse Keeper",
    para: "On a remote island, a lighthouse keeper lived alone, his only companion the seagulls that circled overhead. The lighthouse was his world, and he loved it dearly. He had spent his entire life tending to the lighthouse, keeping its beacon shining bright. The lighthouse keeper was a solitary man, but he was not lonely. He found joy in the simple things in life, such as watching the sunrise and sunset, listening to the waves crashing against the shore, and observing the wildlife. He had a deep appreciation for the natural world, and he felt a strong connection to the sea. One day, a young woman named Sarah washed ashore on the island. She was lost and frightened, and the lighthouse keeper welcomed her into his home. Together, they repaired the lighthouse and kept the beacon shining. The lighthouse keeper found a new purpose in his life, and Sarah found a home. And so, the lonely lighthouse became a place of hope and companionship."
  },
  {
    title: "The Forgotten Piano",
    para: "In the attic, a dusty piano stood forgotten. Its keys had long been silent, and the echoes of past melodies still lingered in the air. The piano had once been a source of joy and entertainment, but now it was a relic of a bygone era. A young girl named Lily discovered the forgotten piano one day while exploring the attic. She was fascinated by its ornate design and the intricate carvings on its case. She dusted off the piano and carefully lifted the lid. Lily had never played the piano before, but she had always wanted to learn. She sat down at the keyboard and began to experiment. To her surprise, the piano still worked. She played a simple melody, and the sound filled the attic with a sense of warmth and nostalgia. Lily spent hours practicing the piano, and she quickly developed a talent for music. She played at school concerts, church services, and local events. The forgotten piano had brought joy and purpose back into her life."
  },
  {
    title: "The Lost Kitten",
    para: "A tiny kitten was lost in the woods. It meowed pitifully, searching for its mother. The kitten was scared and alone, and it didn't know how to find its way home. A kindhearted boy named Ethan found the kitten wandering the woods. He picked it up and held it close. The kitten purred contentedly, and Ethan knew that he had found a new friend. Ethan took the kitten home and gave it food and water. He named the kitten Whiskers, and he cared for it lovingly. Whiskers quickly became a beloved member of Ethan's family. It was always happy and playful, and it brought joy to everyone around it. Ethan was so grateful for Whiskers, and he knew that he had saved the kitten's life."
  },
];
// ----------------------------------------------------------------------------------

let nav = document.getElementById('nav')
for (const story of stories) {
  nav.innerHTML += `<button id="btn" value="${story?.title}" style="color: rgb(250, 240, 230);">${story?.title}</button><br>`;
}


let data = document.getElementById("data")
let button = document.getElementById('btn')
let h1 = document.getElementById('h1')

const buttons = document.querySelectorAll('button');
let correctWordCount = 0;
let characterLimit = 0
let startTime;
let endtime;


buttons.forEach( btn => {
  btn.addEventListener('click', () => {   
    let correctWordCount = 0;
    stories.forEach( story => {
      if (story.title == btn.innerHTML){
        characterLimit = story.para.length;
        h1.innerHTML= story.para
       if (window.innerWidth<426) {
        h1.style.fontSize= '12px'
        h1.style.textAlign='left'
        h1.style.fontWeight='100'
        h1.style.lineHeight='140%'
       } else if (window.innerWidth>426 && window.innerWidth<769) {
        h1.style.fontSize= '15px'
        h1.style.textAlign='left'
        h1.style.fontWeight='100'
        h1.style.lineHeight='140%'
       } else if (window.innerWidth>769 && window.innerWidth<1025) {
        h1.style.fontSize= '20px'
        h1.style.textAlign='left'
        h1.style.fontWeight='100'
        h1.style.lineHeight='140%'
       } else if (window.innerWidth>1025 && window.innerWidth<1441) {
        h1.style.fontSize= '25px'
        h1.style.textAlign='left'
        h1.style.fontWeight='100'
        h1.style.lineHeight='140%'
       } else if (window.innerWidth>1441 && window.innerWidth<2561) {
        h1.style.fontSize= '45px'
        h1.style.textAlign='left'
        h1.style.fontWeight='100'
        h1.style.lineHeight='140%'
       }
       
        let startTime = null;

        data.addEventListener('input', () => {
          let new_data = data.value.trim();
          console.log('in',characterLimit)
          word_data = new_data.split(" ")
          word_para = story.para.split(" ")
          
          if (!startTime) {
            startTime = new Date();
            console.log("Start Time:", startTime);
          }

          if (new_data.length > characterLimit) {
            data.value = new_data.substring(0, characterLimit); // Truncate if exceeding limit
            alert('Character limit reached!');
          } 
        });

        data.addEventListener('keydown', (event) => {
          if (event.key === 'Enter') {
            let new_data = data.value.trim();
            word_data = new_data.split(" ")
            word_para = story.para.split(" ")
            let a = story.para.length;

            if (!endtime) {
              endtime = new Date();
              console.log("end Time:", endtime);
            }

            const totalTime = ((endtime - startTime)/1000).toFixed(3);
            console.log('total seconds:', totalTime, ',minutes:', (totalTime/60).toFixed(3));
            
            for (let i = 0; i < word_para.length; i++) {
              if (word_data[i] === word_para[i]) {
                  correctWordCount++;
              }
            }

            let percentage = (correctWordCount / word_para.length) * 100;
            
            perc = (percentage.toFixed(1))

            console.log(perc);

            if (perc>85) h1.innerHTML=`${perc}% Good job`
            else if(perc<85 && perc>60) h1.innerHTML=`${perc}% Just okay`
            else if(perc<60 && perc>35) h1.innerHTML=`${perc}% Try Harder`
            else if(perc<35) h1.innerHTML=`${perc}% Pure Failure`

            h1.innerHTML+=`<br>${(word_data.length/(totalTime/60)).toFixed(2)} wps`

            h1.style.fontSize= '50px'
            h1.style.textAlign='center'
            h1.style.fontWeight='400'
            console.log('Enter key pressed');
            console.log(`Correct word: ${correctWordCount}`); 

            
        }
      });
      }
    })
    // console.log(btn.innerHTML);
    }
  )
})

